{% extends 'adminpanel/admin_base.html' %}
{% load static %}
{% block title %}
    Blog | AdminHome
{% endblock %}
{% block content %}

<div class="container mt-4" > 
    <div id="search-bar" style="display: none; padding: 1rem;">
        <form action="{% url 'adminhome' %}" method="GET" class="d-flex">
            <input type="text" name="query" placeholder="Search..." class="form-control me-2" value="{{ request.GET.query }}">
            <button type="submit" class="btn btn-outline-light"  style="background-color: #007bff; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.25rem; font-size: 1rem; transition: background-color 0.3s;">Search</button>
        </form>
    </div>
  <div class="row" style="margin-top: 60px;">
    <div class="col-lg-12 mb-3 ms-1">
        <div class="card">
            <div class="row align-items-center">
                <div class="col-sm-5">
                    <div class="card-body">
                        <h5 class="card-title text-primary">Welcome {{ user.username }} ðŸŽ‰</h5>
                        <!-- Placeholder for additional content -->
                    </div>
                </div>
                <div class="col-sm-7 text-center text-sm-left">
                    <div class="card-body pb-0 px-0 px-md-4">
                        <img
                            src="{% static 'assets/img/illustrations/man-with-laptop-light.png' %}"
                            height="140"
                            alt="View Badge User"
                            data-app-dark-img="illustrations/man-with-laptop-dark.png"
                            data-app-light-img="illustrations/man-with-laptop-light.png"
                        />
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>
  <div class="container mt-4">
    <div class="row">
        <!-- Total Users Card -->
        <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
            <div class="card text-center">
                <div class="card-body">
                    <div class="icon-box">
                        <i class="fas fa-users fa-2x text-success"></i>
                    </div>
                    <span>Total Users</span>
                    <h3 class="card-title text-nowrap mb-1">{{ total_users }}</h3>
                </div>
            </div>
        </div>

        <!-- Inactive Users Card -->
        <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
            <div class="card text-center">
                <div class="card-body">
                    <div class="icon-box">
                        <i class="fas fa-user-times fa-2x text-danger"></i>
                    </div>
                    <span>Inactive Users</span>
                    <h3 class="card-title text-nowrap mb-1">{{ inactive_users }}</h3>
                </div>
            </div>
        </div>

        <!-- Total Blogs Card -->
        <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
            <div class="card text-center">
                <div class="card-body">
                    <div class="icon-box">
                        <i class="fas fa-pen-fancy fa-2x text-info"></i>
                    </div>
                    <span>Total Blogs</span>
                    <h3 class="card-title text-nowrap mb-1">{{ total_blogs }}</h3>
                </div>
            </div>
        </div>

        <!-- Hidden Blogs Card -->
        <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
            <div class="card text-center">
                <div class="card-body">
                    <div class="icon-box">
                        <i class="fas fa-eye-slash fa-2x text-muted"></i>
                    </div>
                    <span>Hidden Blogs</span>
                    <h3 class="card-title text-nowrap mb-1">{{ hidden_blogs }}</h3>
                </div>
            </div>
        </div>
    </div>

    <style>
        .icon-box {
            margin-bottom: 10px;
        }
        .card {
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .card-title {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }
    </style>
</div>

 
   
  

  <!-- Blog Cards Section -->
  <div class="container-xxl flex-grow-1 container-p-y">
    <!-- Display Blogs -->
    <div class="row mb-5">
        {% if blogs %}
            {% for blog in blogs %}
            <div class="col-md-4 mb-3">
                <div class="blog-card card mb-5">
                    <!-- Blog Image Section -->
                    <div class="blog-image-container">
                        {% if blog.blog_image %}
                        <img class="blog-image" src="{{ blog.blog_image.url }}" alt="Blog image" />
                        {% else %}
                        <img class="card-img img-fluid" src="{% static 'assets/img/elements/2.jpg' %}" alt="Default image" />
                        {% endif %}
                        <!-- View Icon in the Image -->
                        <a href="{% url 'blog_view' blog.id %}" class="view-icon">
                            <i class="fas fa-eye"></i>
                        </a>
                    </div>

                    <!-- Blog Content Section -->
                    <div class="blog-content">
                        <h5 class="blog-title">{{ blog.title|default:"Blog Title" }}</h5>
                        <p class="blog-description">
                            {{ blog.description|default:"Lorem ipsum dolor sit amet, consectetur adipiscing elit." }}
                            
                        </p>
                        
                    </div>

                    <!-- Blog Footer with Buttons -->
                    <div class="blog-footer d-flex justify-content-between align-items-center">
                        <div>
                            
                                <form method="POST" action="{% url 'adminhome' %}" style="display:inline;">
                                    {% csrf_token %}
                                    <input type="hidden" name="blog_id" value="{{ blog.id }}">
                                    {% if blog.status == 'visible' %}
                                        <button type="submit" name="hide_blog" class="btn btn-danger btn-sm">Hide Blog</button>
                                    {% else %}
                                        <button type="submit" name="show_blog" class="btn btn-success btn-sm">Show Blog</button>
                                    {% endif %}
                                </form>
                            
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
        <div class="col-md-12">
            <p>No blogs available matching your search.</p>
        </div>
        {% endif %}
    </div>

    <!-- Display Users -->
    
</div>

<style>
  
        /* Add your CSS styles here */
        .blog-card {
            position: relative;
            background-color: white;
            transition: background-color 0.3s ease, transform 0.3s ease;
            border: 1px solid #ddd;
            border-radius: 20px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 350px; 
            box-shadow: 2.8 rem color(srgb rgb(10, 10, 10) rgb(10, 10, 10) rgb(15, 15, 15));
        }

        .blog-card:hover {
            background-color: #5aecf7; /* Change background color on hover */
            transform: translateY(-5px); /* Slight lift effect on hover */
        }

        /* Blog Image Container */
        .blog-image-container {
            position: relative;
            width: 100%;
            height: 200%; /* Adjust based on your design */
            overflow: hidden;
        }

        .blog-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* View Icon */
        .view-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
            color: white;
            opacity: 0;
            transition: opacity 0.3s ease, color 0.3s ease, font-size 0.3s ease;
        }

        .blog-image-container:hover .view-icon {
            opacity: 1;
        }
        .blog-image {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transition: transform 0.3s ease;
            }

            .blog-image-container:hover .blog-image {
                transform: scale(1.5) translateY(-5px);
            }


        .view-icon:hover {
            color: #007bff; /* Blue color on hover */
            font-size: 50px;
        }

        .blog-content {
            padding: 15px;
            flex-grow: 1;
        }

        .blog-title {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        /* Truncate description */
        .blog-description {
            display: -webkit-box;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            -webkit-line-clamp: 3;
            line-clamp: 3; /* Standard property */
            margin-bottom: 15px;
        }

        .blog-footer {
            display: flex;
            justify-content: flex-end;
            padding: 10px;
        }

        .blog-footer .btn {
            font-size: 0.85rem;
            margin-left: 10px;
        }
    

</style>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
        var toggleSearchButton = document.getElementById('toggle-search');
        var searchBar = document.getElementById('search-bar');

        toggleSearchButton.addEventListener('click', function() {
            if (searchBar.style.display === 'none' || searchBar.style.display === '') {
                searchBar.style.display = 'block';
            } else {
                searchBar.style.display = 'none';
            }
        });
    });
</script>

{% endblock %}
